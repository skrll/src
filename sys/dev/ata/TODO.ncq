Other random notes (do outside the NCQ branch):
-----------------------------------------------------
implement support for PM FIS-based switching, remove restriction in atastart()
for hw which supports it, adjust error handling in controller drivers to handle
xfers for several different drives

dump to unopened disk fails (e.g. dump do wd1b when wd1a not mounted), due
to the open path executing ata_get_params(), which eventually tsleeps()
while waiting for the command to finish; specifically, if WDF_LOADED is not
set 
- happens due to wd_get_params() with just AT_WAIT in wdopen()
- not easy to fix, open needs to read disklabel and all this mechanics
  is too much for emergency crash dump code path
- old bug - kern/16789

add support for the NCQ TRIM if supported by device?

ahcisata(4)/siisata(4) - enable detach on shutdown, and fix the issue
with atabus being detached several times
